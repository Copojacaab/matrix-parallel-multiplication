<!-- 
 Viewer dello stato di un job:
 1) legge il jobID dall'url
 2) fa polling sul server ogni 2s
 3) aggiorna ui
 4) alla fine ferma il polling e chiede anche le matrix al server -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Status</title>
    <link rel="stylesheet" href="css/style.css">
    <script defer src="js/status.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <div class="brand">
                <div class="logo">Mx</div>
                <span>MatrixLab</span>
            </div>
            <nav>
                <a class="btn" href="index.html">Home</a>
                <a class="btn" href="new.html">Nuovo</a>
                <a class="btn" href="history.html">History</a>
                <a class="btn" href="bench.html">Benchmark</a>
            </nav>
        </header>

        <main>
            <h1 style="margin:16px 0 8px">Stato job</h1>
            <p class="help">Questa pagina legge il <strong>jobId</strong> 
                dalla URL, chiama il backend (<code>GET /api/jobs/:id</code>)
                 e fa <em>polling</em> finch√© lo stato diventa <code>completed</code>
                  o <code>failed</code>.
            </p>

            <div class="grid">
                <section class="card">
                    <div class="row">
                        <span class="badge">JobId</span> <span id="jobId" class="mono">-</span>
                    </div>
                    <div class="row">
                        <span class="badge">Stato</span> <span id="status" class="status warn">-</span>
                    </div>
                    <div class="row">
                        <span class="badge">Aggiornamento:</span> <span id="tick" class="mono">-</span>
                    </div>
                    <div class="row">
                        <div id="note" class="msg">-</div>
                    </div>
                </section>

                <section class="card">
                    <h2>Dettagli</h2>
                    <div class="kv">
                        <div class="k">Creato</div> <div id="created">-</div>
                        <div class="k">Completato</div> <div id="completed">-</div>
                        <div class="k">Durata</div> <div id="exec">-</div>
                        <div class="k">Dimensioni</div> <div id="dims" class="mono">-</div>
                    </div>
                </section>

                <section class="card" style="margin-top:16px">
                    <h2>Anteprima risultato(se disponibile)</h2>
                    <p class="help">Mostriamo solo le prime celle come <em>anteprima</em>. 
                        Per l'intera matrice, usa la cronologia o il download (feature futura).
                    </p>
                    <div id="preview-wrap">-</div>

                    <div id="download-wrap" class="actions" style="margin-top:12px;">
                        <button id="btn-dl-json", class="btn">Scarica JSON</button>
                        <button id="btn-dl-csv" class="btn">Scarica CSV</button>
                        <button id="btn-copy" class="btn">Copia negli appunti</button>
                    </div>
                </section>
            </div>
        </main>
    </div>
</body>
</html>