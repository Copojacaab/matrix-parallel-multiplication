<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>Benchmark</title>
  <link rel="stylesheet" href="css/style.css" />
  <script defer src="js/bench.js"></script>
</head>
<body>
  <div class="container">
    <header>
      <div class="brand"><div class="logo">Mx</div><span>MatrixLab</span></div>
      <nav>
        <a class="btn" href="index.html">Home</a>
        <a class="btn" href="new.html">Nuovo</a>
        <a class="btn" href="history.html">History</a>
        <a class="btn" href="bench.html">Benchmark</a>
      </nav>
    </header>

    <main>
      <h1 style="margin:16px 0 8px">Benchmark seriale vs MPI</h1>
      <p class="help">Inserisci dimensioni e processi (lista "128,256" o range "128-1024:128").</p>

      <section class="card dark-form">
        <form id="bench-form" class="kv" style="grid-template-columns:auto 1fr;row-gap:10px;">
          <label for="sizes" class="k">sizes</label>
          <input id="sizes" name="sizes" type="text" value="128,256" class="mono" required />

          <label for="procs" class="k">procs</label>
          <input id="procs" name="procs" type="text" value="2,4" class="mono" required />

          <label for="repeats" class="k">repeats</label>
          <input id="repeats" name="repeats" type="number" min="1" step="1" value="3" />

          <label for="seed" class="k">seed (opz.)</label>
          <input id="seed" name="seed" type="number" placeholder="random se vuoto" />

          <label class="k">oversubscribe</label>
          <label style="align-self:center">
            <input id="oversub" type="checkbox" checked /> Consenti oversubscribe
          </label>
          <div class="actions actions--form">
            <button id="btnBench" class="btn primary" type="submit">➕​ Avvia benchmark</button>
          </div>
        </form>

        <div id="run-result" class="msg" style="margin-top:10px">-</div>
      </section>

      <section class="card" style="margin-top:16px">
        <div class="row"><span class="badge">BatchId</span> <span id="batchId" class="mono">-</span></div>
        <div class="row"><span class="badge">Ultimo aggiornamento</span> <span id="tick" class="mono">-</span></div>
        <div class="row"><div id="note" class="msg">-</div></div>
      </section>

      <section class="card" style="margin-top:16px">
        <h2>Risultati</h2>
        <div id="table-wrap" class="tbl-scroll">-</div>
      </section>
    </main>
    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

    <section class="card" style="margin-top:16px">
      <div class="chart-head">
        <h2>Grafico: Speedup</h2>

        <div class="segmented" id="speedupSeg">
          <button type="button" data-v="bar"  aria-pressed="true">Barre</button>
          <button type="button" data-v="line" aria-pressed="false">Linee</button>
        </div>

        <label class="sr-only" for="speedupChartType">Tipo grafico speedup</label>
        <select id="speedupChartType" class="sr-only" aria-hidden="true" tabindex="-1">
          <option value="bar" selected>bar</option>
          <option value="line">line</option>
        </select>
      </div>
      <canvas id="chart-speedup" height="200"></canvas>
    </section>

    </section>

    <section class="card" style="margin-top:16px">
      <div class="chart-head">
        <h2>Grafico: Tempo vs n</h2>
        <label class=""></label>
        <div class="segmented" id="timeScaleSeg">
          <button type="button" data-v="linear"       aria-pressed="true">Lineare</button>
          <button type="button" data-v="logarithmic"  aria-pressed="false">Log</button>
        </div>

        <label class="sr-only" for="timeScale">Y scala</label>
        <select id="timeScale" class="sr-only" aria-hidden="true" tabindex="-1">
          <option value="linear">Lineare</option>
          <option value="logarithmic">Log</option>
        </select>
      </div>
      <canvas id="chart-time" height="200"></canvas>
    </section>


    <section class="card" style="margin-top:16px">
      <div class="chart-head">
        <h2>Guadagno (speedup) & Efficienza</h2>

        <label class="chart-label" for="comboN">n</label>
        <select id="comboN" class="select-soft"></select>
      </div>
      <canvas id="chart-combo" height="220"></canvas>
    </section>




  </div>
</body>
</html>
