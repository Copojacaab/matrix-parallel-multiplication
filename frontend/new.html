<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Nuovo calcolo</title>
  <link rel="stylesheet" href="css/style.css" />
  <script defer src="js/new.js"></script>
  <style>
    /* Stili minimi per la griglia dinamica (puoi spostarli in style.css) */
    .matrix-grid { display: grid; gap: 6px; }
    .matrix-row { display: grid; gap: 6px; }
    .matrix-cell input {
      width: 68px; height: 36px; text-align: right;
      background: var(--panel); border: 1px solid #1f2937; border-radius: 8px;
      color: var(--text); padding: 6px 8px; outline: none;
    }
    .matrix-cell input:focus {
      border-color: #334155; box-shadow: 0 0 0 3px rgba(56,189,248,0.15);
    }
    .section-title { margin: 0 0 8px; }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="brand">
        <div class="logo">Mx</div>
        <span>MatrixLab</span>
      </div>
      <nav>
        <a class="btn" href="index.html">Home</a>
        <a class="btn" href="history.html">Cronologia</a>
        <a class="btn" href="bench.html">Benchmark</a>
        <a class="btn" href="about.html">About</a>
      </nav>
    </header>

    <main>
      <h1 style="margin:16px 0 8px">Nuovo calcolo</h1>
      <p class="help">Scegli la modalit√† di input: <strong>griglie dinamiche</strong> (consigliato) oppure <strong>textarea</strong> (rapido/test).</p>

      <div class="grid">
        <!-- ===== Sezione: Input dinamico con griglie ===== -->
        <section class="card">
          <h2 class="section-title">Input dinamico (griglie)</h2>
          <p class="help">Imposta <strong>m</strong>, <strong>n</strong>, <strong>p</strong>, genera le griglie e inserisci i valori.</p>

          <div class="row">
            <div class="group">
              <span class="pill">m (righe A)</span>
              <input id="dim-m" type="number" min="1" value="3" class="input number">
            </div>
            <div class="group">
              <span class="pill">n (colonne A = righe B)</span>
              <input id="dim-n" type="number" min="1" value="3" class="input number">
            </div>
            <div class="group">
              <span class="pill">p (colonne B)</span>
              <input id="dim-p" type="number" min="1" value="3" class="input number">
            </div>
            <button id="btnBuildGrids" class="btn">üîß Genera griglie</button>
          </div>

          <div class="row">
            <span id="gridSummary" class="pill">‚Äî</span>
          </div>

          <div class="row">
            <div class="card" style="flex:1 1 0;">
              <h3 style="margin:0 0 8px;">Matrice A</h3>
              <div id="gridA" class="matrix-grid"></div>
              <div class="row">
                <button id="gridAFillZeros" class="btn">Riemp√¨ 0</button>
                <button id="gridAFillOnes" class="btn">Riemp√¨ 1</button>
                <button id="gridAToTextarea" class="btn">‚¨á Copia in textarea A</button>
              </div>
              <span id="gridErrA" class="msg err" hidden></span>
            </div>

            <div class="card" style="flex:1 1 0;">
              <h3 style="margin:0 0 8px;">Matrice B</h3>
              <div id="gridB" class="matrix-grid"></div>
              <div class="row">
                <button id="gridBFillZeros" class="btn">Riemp√¨ 0</button>
                <button id="gridBFillOnes" class="btn">Riemp√¨ 1</button>
                <button id="gridBToTextarea" class="btn">‚¨á Copia in textarea B</button>
              </div>
              <span id="gridErrB" class="msg err" hidden></span>
            </div>
          </div>
        </section>

        <!-- ===== Sezione: Input alternativo con textarea (quella che gi√† avevi) ===== -->
        <section class="card">
          <h2 class="section-title">Input alternativo (textarea)</h2>
          <p class="help">Valori separati da spazio/virgola, righe separate da invio.</p>
          <div class="row">
            <button id="textareaFromGrids" class="btn">‚¨Ü Copia dalle griglie ‚Üí textarea</button>
            <button id="gridsFromTextarea" class="btn">‚¨á Copia dalle textarea ‚Üí griglie</button>
          </div>
          <div class="grid">
            <div>
              <h3 style="margin:0 0 8px;">Matrice A</h3>
              <textarea id="matA" placeholder="1 2 3&#10;4 5 6"></textarea>
              <div class="row">
                <span id="shapeA" class="pill">‚Äî</span>
                <span id="errA" class="msg err" hidden></span>
              </div>
            </div>
            <div>
              <h3 style="margin:0 0 8px;">Matrice B</h3>
              <textarea id="matB" placeholder="1 2&#10;3 4&#10;5 6"></textarea>
              <div class="row">
                <span id="shapeB" class="pill">‚Äî</span>
                <span id="errB" class="msg err" hidden></span>
              </div>
            </div>
          </div>

          <!-- (ripristino) Generazione casuale gi√† nota -->
          <section class="card" style="margin-top:16px">
            <h3>Generazione casuale</h3>
            <p class="help">Scegli <strong>m, n, p</strong> e un intervallo numerico; verranno create A(m√ón) e B(n√óp) con interi uniformi nell'intervallo.</p>
            <div class="row">
              <div class="group"><span class="pill">m</span><input id="gen-m" type="number" min="1" value="3" class="input number"></div>
              <div class="group"><span class="pill">n</span><input id="gen-n" type="number" min="1" value="3" class="input number"></div>
              <div class="group"><span class="pill">p</span><input id="gen-p" type="number" min="1" value="3" class="input number"></div>
            </div>
            <div class="row">
              <div class="group"><span class="pill">min</span><input id="gen-min" type="number" value="-9" class="input number"></div>
              <div class="group"><span class="pill">max</span><input id="gen-max" type="number" value="9" class="input number"></div>
              <button id="btnRandom" class="btn">üé≤ Genera matrici</button>
            </div>
          </section>
        </section>

        <!-- ===== Sezione: invio (identica alla tua pipeline) ===== -->
        <section class="card" style="margin:16px 0 8px;">
          <h2>Invio</h2>
          <p class="help">
            Cliccando ‚ÄúAvvia calcolo‚Äù, invieremo <strong>POST</strong> a <code>/api/jobs</code>. Se la risposta √® <code>202</code> con <code>{ jobId }</code>, verrai reindirizzato a <code>status.html?jobId=...</code>.
          </p>
          <div class="actions">
            <button id="btnStart" class="btn primary">‚ñ∂ Avvia calcolo</button>
            <span id="feedback" class="msg"></span>
          </div>
          <div id="summary" class="summary"></div>
        </section>
      </div>
    </main>

    <footer>MatrixLab</footer>
  </div>
</body>
</html>
